### 21주차: 임베디드 시스템 프로그래밍

**강의 목표:** 임베디드 시스템의 개념과 중요성을 이해하고, 마이크로컨트롤러 프로그래밍 및 실시간 운영체제(RTOS)에 대해 학습합니다. 또한, 간단한 임베디드 시스템 프로젝트를 통해 실습합니다.

**강의 내용:**

1. **임베디드 시스템 개요**
   - 임베디드 시스템이란?
     - 특정 기능을 수행하기 위해 설계된 컴퓨팅 시스템
     - 일반적인 컴퓨터와의 차이점
   - 임베디드 시스템의 응용 분야
     - 가전제품, 의료기기, 자동차, 산업용 제어 시스템 등
   - 임베디드 시스템의 구성 요소
     - 하드웨어: 마이크로컨트롤러, 센서, 액추에이터 등
     - 소프트웨어: 펌웨어, 드라이버, 애플리케이션 등

2. **마이크로컨트롤러 프로그래밍**
   - 마이크로컨트롤러란?
     - CPU, 메모리, 입출력 포트를 포함한 단일 칩 컴퓨터
   - 마이크로컨트롤러 프로그래밍 언어
     - C 언어, 어셈블리 언어
   - 마이크로컨트롤러 개발 도구
     - 개발 보드, IDE(Integrated Development Environment), 디버거
   - 기본 프로그래밍 예제
     - GPIO 제어, 타이머, 인터럽트 처리

3. **실시간 운영체제 (RTOS)**
   - RTOS란 무엇인가?
     - 실시간 응용 프로그램을 위한 운영체제
   - RTOS의 주요 기능
     - 태스크 스케줄링, 인터럽트 관리, 동기화 기법
   - RTOS의 예시
     - FreeRTOS, VxWorks, μC/OS-II
   - RTOS 프로그래밍 예제
     - 태스크 생성, 우선순위 설정, 세마포어 사용

**실습:**

1. **마이크로컨트롤러 프로그래밍 실습**

**GPIO 제어 예제:**

```c
#include <avr/io.h>
#include <util/delay.h>

#define LED_PIN PB0

int main(void) {
    DDRB |= (1 << LED_PIN);  // LED_PIN을 출력으로 설정

    while (1) {
        PORTB |= (1 << LED_PIN);  // LED 켜기
        _delay_ms(1000);         // 1초 대기
        PORTB &= ~(1 << LED_PIN); // LED 끄기
        _delay_ms(1000);         // 1초 대기
    }

    return 0;
}
```

2. **RTOS 프로그래밍 실습**

**FreeRTOS 태스크 생성 예제:**

```c
#include <FreeRTOS.h>
#include <task.h>

void vTask1(void *pvParameters) {
    for (;;) {
        // 태스크 1 작업
        vTaskDelay(pdMS_TO_TICKS(1000)); // 1초 대기
    }
}

void vTask2(void *pvParameters) {
    for (;;) {
        // 태스크 2 작업
        vTaskDelay(pdMS_TO_TICKS(500));  // 0.5초 대기
    }
}

int main(void) {
    xTaskCreate(vTask1, "Task 1", 1000, NULL, 1, NULL);
    xTaskCreate(vTask2, "Task 2", 1000, NULL, 1, NULL);

    vTaskStartScheduler(); // 스케줄러 시작

    for (;;);
    return 0;
}
```

**간단한 임베디드 시스템 프로젝트:**

**LED 점멸 제어 및 버튼 입력 예제:**

```c
#include <avr/io.h>
#include <util/delay.h>

#define LED_PIN PB0
#define BUTTON_PIN PB1

int main(void) {
    DDRB |= (1 << LED_PIN);      // LED_PIN을 출력으로 설정
    DDRB &= ~(1 << BUTTON_PIN);  // BUTTON_PIN을 입력으로 설정
    PORTB |= (1 << BUTTON_PIN);  // 내부 풀업 저항 활성화

    while (1) {
        if (PINB & (1 << BUTTON_PIN)) {
            PORTB |= (1 << LED_PIN);  // 버튼이 눌렸을 때 LED 켜기
        } else {
            PORTB &= ~(1 << LED_PIN); // 버튼이 눌리지 않았을 때 LED 끄기
        }
    }

    return 0;
}
```

**과제:**

1. **고급 마이크로컨트롤러 프로그래밍**
   - 타이머 인터럽트를 사용하여 주기적으로 LED를 점멸시키는 프로그램 작성
   - 아날로그-디지털 변환(ADC)을 사용하여 센서 데이터를 읽고 처리하는 프로그램 작성

2. **RTOS 태스크 간 동기화**
   - 세마포어를 사용하여 두 개의 태스크 간의 동기화를 구현
   - 태스크 간 메시지 큐를 사용하여 데이터를 교환하는 프로그램 작성

**퀴즈 및 해설:**

1. **임베디드 시스템의 주요 구성 요소는 무엇인가요?**
   - 임베디드 시스템의 주요 구성 요소는 하드웨어(마이크로컨트롤러, 센서, 액추에이터 등)와 소프트웨어(펌웨어, 드라이버, 애플리케이션 등)입니다.

2. **RTOS의 주요 기능은 무엇인가요?**
   - RTOS의 주요 기능은 태스크 스케줄링, 인터럽트 관리, 동기화 기법입니다. RTOS는 실시간 응용 프로그램에서 요구되는 정밀한 시간 제어와 높은 신뢰성을 제공합니다.

3. **마이크로컨트롤러와 일반 컴퓨터의 차이점은 무엇인가요?**
   - 마이크로컨트롤러는 CPU, 메모리, 입출력 포트를 포함한 단일 칩 컴퓨터로, 특정 기능을 수행하기 위해 설계되었습니다. 일반 컴퓨터는 범용적으로 사용되며, 더 많은 자원과 복잡한 운영체제를 갖추고 있습니다.

**해설:**

1. **임베디드 시스템의 주요 구성 요소**는 하드웨어(마이크로컨트롤러, 센서, 액추에이터 등)와 소프트웨어(펌웨어, 드라이버, 애플리케이션 등)입니다. 하드웨어는 시스템의 물리적 구성을 담당하고, 소프트웨어는 하드웨어를 제어하고 특정 기능을 수행합니다.

2. **RTOS의 주요 기능**은 태스크 스케줄링, 인터럽트 관리, 동기화 기법입니다. RTOS는 실시간 응용 프로그램에서 요구되는 정밀한 시간 제어와 높은 신뢰성을 제공하여, 여러 태스크를 효과적으로 관리하고, 시스템의 응답성을 높입니다.

3. **마이크로컨트롤러와 일반 컴퓨터의 차이점**은 마이크로컨트롤러는 특정 기능을 수행하기 위해 설계된 단일 칩 컴퓨터로, 자원이 제한적이며 효율성이 중요합니다. 반면, 일반 컴퓨터는 범용적으로 사용되며, 더 많은 자원과 복잡한 운영체제를 갖추고 있어 다양한 작업을 처리할 수 있습니다.

이로써 21주차 강의를 마무리합니다. 다음 주차에는 프로젝트 진행 상황 점검 및 중간 발표 준비를 학습합니다. 추가 질문이 있거나 특정 주제에 대해 더 알고 싶다면 언제든지 문의해 주세요.